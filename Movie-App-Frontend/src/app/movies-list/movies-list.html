<div class="container-sm ">
    <app-search-bar (search)="onSearch($event)"></app-search-bar>
    <h4 class="fw-bold mt-5">Now Playing</h4>
    <div class="row g-2 justify-content-center p-5">
        @for (movie of paginatedMovies; track movie.id) {
        <div class="col-6 col-md-4 col-lg-3 col-xl-2">
            <a [routerLink]="['/movies', movie.id]" class="card-link d-block h-100" [title]="movie.name">
                <div class="card movie-card h-100 border-0">
                    <div class="position-relative img-wrapper">
                        <img [src]="movie.imgURL" class="card-img-top rounded-1" alt="{{ movie.name }}" [title]="movie.name">
                        <div class="dark-overlay"></div>
                        <button type="button" class="btn rounded-circle favorite-icon-glass position-absolute top-0 end-0 m-2" (click)="Fav(movie.id, $event)" title="Add to watchlist">
                              <i [ngClass]="isFavorite(movie.id) ? 'fa-solid fa-heart' : 'fa-regular fa-heart'"
                                [style.color]="isFavorite(movie.id) ? '#FFD43B' : ''"></i>
                            </button>
                        <span class="rating-circle" [ngClass]="getRatingClass(movie.watchRate || movie.rate)">
                              {{ (movie.watchRate || movie.rate) }}%
                            </span>
                    </div>
                    <div class="card-body px-2">
                        <h6 class="card-title fw-bold mb-1 text-truncate" [title]="movie.name">{{ movie.name }}</h6>
                        <div class="d-flex justify-content-between align-items-center">
                            <small class="text-muted">{{ movie.date | date: 'MMM d, y' }}</small>
                            <span class="rating">â˜… {{ movie.rate }} </span>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        }@empty {
        <h1>No Movies Found!</h1>
        }
    </div>


    <nav aria-label="Page navigation">
        <ul class="pagination pb-4 justify-content-center gap-2">
            <li class="page-item" [class.disabled]="currentPage === 1">
                <button class="page-link" (click)="prevPage()">&laquo;</button>
            </li>
            @for (page of pageNumbers; track page) {
            <li class="page-item" [class.active]="page === currentPage">
                <button class="page-link" (click)="goToPage(page)">{{ page }}</button>
            </li>
            }
            <li class="page-item" [class.disabled]="currentPage === totalPages">
                <button class="page-link" (click)="nextPage()">&raquo;</button>
            </li>
        </ul>
    </nav>

</div>